{% load static %}
<!doctype html>
<html lang="es">

<head>
    <title>Crear Torneo</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS v5.2.0-beta1 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="../../../static/crearTorneo.css">
</head>

<body>
    <header>
        header
    </header>
    <main>
        <div class="contain" id="banner">
            <div class="container-fluid" id="capa2">
                <form class="needs-validation" id="formulario" name="formulario">
                    <section class="organizador form-group">
                        <article class="mb-3" id="form1">
                            <br>
                            <div>
                                <label class="primera" id="organizador_label" for="nombre">Nombre del
                                    organizador:</label>
                                <input type="text" class="primer form-control" name="nombre" id="organizador_input"
                                    placeholder="Ingrese su nombre" pattern="^(?!\s)[a-zA-ZÁáÉéÍíÓóÚú\s]{5,50}"
                                    required>
                            </div>
                            <br>
                            <div>
                                <label class="primera" id="numero_label" for="telef">Número telefónico: </label>
                                <input type="text" class="primer form-control" name="telef" id="numero_input"
                                    placeholder="Ingrese su número telefonico" pattern="^(?!\s)[0-9\+]{10,50}" required>
                            </div>
                        </article>


                        <article class="mb-3">
                            <br>
                            <div class="">
                                <label class="primera" id="email_label" for="email">Correo Electrónico:</label>
                                <input type="email" class="form-control" name="email" id="email_input"
                                    placeholder="Ingrese su E-mail" minlength="5" maxlength="50" required>
                            </div>
                            <br>
                            <div>
                                <label class="" id="pais_label" for="pais">Seleecione el país de origen</label>
                                <select class="form-select form-select-sm " id="pais" name="pais" required>
                                    <option selected value="">Seleccione país</option>
                                    <option value="Argentina">Argentina</option>
                                    <option value="Bolivia">Bolivia</option>
                                    <option value="Brasil">Brasil</option>
                                    <option value="Chile">Chile</option>
                                    <option value="Colombia">Colombia</option>
                                    <option value="Ecuador">Ecuador</option>
                                    <option value="Paraguay">Paraguay</option>
                                    <option value="Perú">Perú</option>
                                    <option value="Uruguay">Uruguay</option>
                                    <option value="Venezuela">Venezuela</option>
                                    <option value="Venezuela">Otro</option>
                                </select>
                            </div>
                        </article>
                    </section>
                    <br>
                    <section class="torneo form-group">
                        <br>
                        <article class="mb-3" id="form2">
                            <div class="column">
                                <label class="primera" id="torneo_label" for="torneo">Nombre del
                                    Torneo:</label>
                                <input type="text" class="primer form-control" name="torneo" id="torneo_input"
                                    placeholder="Ingrese nombre del torneo" pattern="^(?!\s)[a-zA-ZÁáÉéÍíÓóÚú\s]{5,50}"
                                    required>
                            </div>
                            <div class="md-form md-outline input-with-post-icon datepicker" id="formatsSection">
                                <label class="primera" id="fecha_label" for="fecha_torneo">Fecha del Torneo:</label>
                                <div class="row">
                                    <div class="col-6">
                                        <input type="date" id="fecha_input" name="fecha_torneo" class="form-control"
                                            placeholder="Inicio" required>
                                    </div>
                                    <div class="col-6">
                                        <input type="date" id="fecha_input" name="fecha_torneo" class="form-control"
                                            placeholder="Fin" required>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <article class="mb-3" id="form2">
                            <div class="column">
                                <label class="primera" id="montoPre_label" for="montoPre">Monto
                                    Pre-inscripción:</label>
                                <div class="row">
                                    <div class="col-10">
                                        <input type="number" class="primer form-control" name="montoPre"
                                            id="montoPre_input" min="0"
                                            placeholder="Ingrese el costo de Pre-inscripción" required>
                                    </div>
                                    <div class="dolares col-2">
                                        <label id="montoPre_label" for="montoPre">$us.</label>
                                    </div>
                                </div>

                            </div>
                            <div class="column">
                                <label class="primera" id="fechaPre_label" for="fechaPre">Fecha Pre-inscripción:
                                </label>
                                <div class="row">
                                    <div class="col-6">
                                        <input type="date" id="fechaPre_input" name="fechaPre" class="form-control"
                                            placeholder="Inicio" required>
                                    </div>
                                    <div class="col-6">
                                        <input type="date" id="fechaPre_input" name="fechaPre" class="form-control"
                                            placeholder="Fin" required>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <article class="mb-3" id="form2">
                            <div class="column">
                                <label class="primera" id="montoIns_label" for="montoIns">Monto Rezagados:</label>

                                <div class="row">
                                    <div class="col-10">
                                        <input type="number" class="primer form-control" name="montoIns"
                                            id="montoIns_input" min="0" placeholder="Ingrese el costo para Rezagados"
                                            required>
                                    </div>
                                    <div class="dolares col-2">
                                        <label id="montoPre_label" for="montoPre">$us.</label>
                                    </div>
                                </div>


                            </div>
                            <div class="column">
                                <label class="primera" id="fechaIns_label" for="fechaIns">Fecha Rezagados e
                                    Inscripciones: </label>

                                <div class="row">
                                    <div class="col-6">
                                        <input type="date" id="fechaIns_input" name="fechaIns" class="form-control"
                                            placeholder="Inicio" required>
                                    </div>
                                    <div class="col-6">
                                        <input type="date" id="fechaIns_input" name="fechaIns" class="form-control"
                                            placeholder="Fin" required>
                                    </div>
                                </div>
                            </div>
                        </article>
                    </section>
                    <br />
                    <section class="categorias form-group">
                        <br />
                        <article class="mb-3" id="form3">
                            <div class="archivo">
                                <label for="convocatoria" class="">Inserte la convocatoria digital</label>
                                <input type="file" class="form-control" id="convocatoria" name="convocatoria"
                                    accept="doctype" required>
                            </div>
                            <div class="archivo">

                            </div>
                        </article>
                        <br />
                        <div class="row">
                            <div class="col-1"></div>
                            <div class="col-10">
                                <div class="row">
                                    <div class="col-6 izqui">
                                        <label for="añadir" class="">Categorías por Edades:</label>
                                    </div>
                                    <div class="col-6 dere">
                                        <button class="btn btn-success" type="button" name="añadir" id="button-añadir"
                                            data-bs-toggle="modal" data-bs-target="#exampleModal">Agregar
                                            Categoría</button>

                                        <!-- Modal -->
                                        <div class="modal fade" id="exampleModal" tabindex="-1"
                                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">CATEGORIA</h5>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                            aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body confModal">
                                                        <label class="primera" id="nombreModal_label"
                                                            for="nombreModal_input">Nombre de la categoria:</label>
                                                        <input type="text" class="primer form-control"
                                                            name="nombreModal_input" id="nombreModal_input"
                                                            placeholder="Ingrese nombre de la categoría"
                                                            pattern="^(?!\s)[a-zA-ZÁáÉéÍíÓóÚú\s]{5,10}" required>
                                                        <br>
                                                        <label class="primera" id="minimoModal_label"
                                                            for="minimoModal">Edad mímina:</label>
                                                        <input type="number" class="primer form-control"
                                                            name="minimoModal" id="minimoModal_input"
                                                            placeholder="Ingrese la edad mínima" min="30" onchange="validacionMin()" required>
                                                        <br>
                                                        <label class="primera" id="maximoModal_label"
                                                            for="maximoModal">Edad máxima:</label>
                                                        <input type="number" class="primer form-control"
                                                            name="maximoModal" id="maximoModal_input"
                                                            placeholder="Ingrese la edad máxima" min="31" onchange="validacionMax()" required>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger"
                                                            data-bs-dismiss="modal" id="modalCancelar">Cancelar</button>
                                                        <button type="button" class="btn btn-primary"
                                                            onclick="insertarFila()">Confirmar</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-1"></div>
                        </div>

                        <div class="listaCategorias row">
                            <div class="col-1"></div>
                            <div class="col-10">
                                <div class="table-responsive">
                                    <table class="table table-striped
                                table-hover	
                                table-borderless
                                table-primary
                                align-middle" id="tablaCategorias">
                                        <thead class="table-primary">
                                            <tr class="table-dark">
                                                <th>Nombre de la Categoría</th>
                                                <th>Edad mínima</th>
                                                <th>Edad máxima</th>
                                            </tr>
                                        </thead>
                                        <tbody class="table-group-divider">

                                        </tbody>

                                    </table>
                                </div>
                            </div>
                            <div class="col-1"></div>
                        </div>
                    </section>
                    <br />

                    <button class="btn btn-danger" type="submit"  name="Registrar"
                        id="button-crear">Crear
                        Torneo</button>
                </form>
            </div>



        </div>
    </main>
    <script>
        var nroCate = 0;
        function validacionMin(){
            let min = document.getElementById('minimoModal_input');
            if(min.value<30){
                   min.value = 30;
            }
        }

        function validacionMax(){
            let max = document.getElementById('maximoModal_input');
            if(max.value < 31){
                max.value =31;
            }
        }

        function insertarFila() {
            let tablaCategorias = document.getElementById('tablaCategorias').insertRow(1);
            let name = document.getElementById('nombreModal_input').value;
            let min = document.getElementById('minimoModal_input').value;
            let max = document.getElementById('maximoModal_input').value;

            if (name.length > 0 && min.length > 0 && max.length > 0) {
                if (min >= max) {
                    alert('La edad minima no puede ser mayor o igual a la maxima');
                }else if(min<30 && max < 31){
                    alert('La edad minima es de 30 años');
                } else {
                    let nameCell = tablaCategorias.insertCell(0);
                    let minCell = tablaCategorias.insertCell(1);
                    let maxCell = tablaCategorias.insertCell(2);
                    nameCell.innerHTML = name;
                    minCell.innerHTML = min;
                    maxCell.innerHTML = max;
                    nroCate = nroCate + 1;
                    let cerrar= document.getElementById('modalCancelar');
                    cerrar.click();
                }

            } else {
                alert("LLene todos los campos")
            }

        }

    
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
        integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous">
        </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"
        integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK" crossorigin="anonymous">
        </script>
</body>

</html>